import { useState, useEffect } from 'react';
import '../styles/ChatBot.css';

const ChatBot = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [messages, setMessages] = useState([]);
  const [inputMessage, setInputMessage] = useState('');
  const [currentLanguage, setCurrentLanguage] = useState('en');

  // Q&A database with translations
  const qaDatabase = {
    en: {
      greeting: {
        patterns: ['hi', 'hello', 'hey', 'good morning', 'good afternoon', 'good evening'],
        response: 'Hello! Welcome to our banking app. How can I assist you today?'
      },
      appInfo: {
        patterns: ['what is this app', 'what can i do', 'app features', 'bank features', 'what is bank'],
        response: 'This is a modern banking application that allows you to open accounts, manage documents, and track your application status. You can perform various banking operations securely from your device.'
      },
      account: {
        patterns: ['open account', 'new account', 'opening account', 'how to open account'],
        response: 'You can start opening a new account directly through this app. Just follow the steps shown in the "Open Account" section.'
      },
      documents: {
        patterns: ['required documents', 'documents', 'what documents', 'needed documents'],
        response: 'This app will guide you to upload your Aadhar, PAN, photo, and address proof as part of the process.'
      },
      status: {
        patterns: ['application status', 'status', 'check status', 'track application'],
        response: 'You can check the status of your application anytime under the "Track Status" section in this app.'
      },
      updates: {
        patterns: ['document updates', 'update documents', 'change documents', 'modify documents', 'change address proof'],
        response: 'You can update your documents anytime within the app from the "Update Documents" section.'
      },
      security: {
        patterns: ['security information', 'security', 'safety', 'protect account'],
        response: 'This app uses encrypted channels. Your data stays safe. Never share your credentials with anyone, even inside the chat.'
      },
      support: {
        patterns: ['getting help or support', 'help', 'support', 'customer service'],
        response: 'You can chat with this assistant anytime. Type your question below, and I\'ll help you right here.'
      },
      branch: {
        patterns: ['go to branch', 'visit branch', 'need to go branch', 'branch visit', 'physical branch'],
        response: 'No, you don\'t need to go to the branch. All processes are fully online within this app.'
      },
      default: "I'm sorry, I couldn't understand your query. Please try rephrasing or contact our customer support for assistance."
    },
    hi: {
      greeting: {
        patterns: ['à¤¨à¤®à¤¸à¥à¤¤à¥‡', 'à¤¹à¥ˆà¤²à¥‹', 'à¤¹à¤¾à¤¯', 'à¤¶à¥à¤­ à¤ªà¥à¤°à¤­à¤¾à¤¤', 'à¤¶à¥à¤­ à¤¦à¥‹à¤ªà¤¹à¤°', 'à¤¶à¥à¤­ à¤¸à¤‚à¤§à¥à¤¯à¤¾'],
        response: 'à¤¨à¤®à¤¸à¥à¤¤à¥‡! à¤¹à¤®à¤¾à¤°à¥‡ à¤¬à¥ˆà¤‚à¤•à¤¿à¤‚à¤— à¤à¤ª à¤®à¥‡à¤‚ à¤†à¤ªà¤•à¤¾ à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆà¥¤ à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¥€ à¤•à¥ˆà¤¸à¥‡ à¤®à¤¦à¤¦ à¤•à¤° à¤¸à¤•à¤¤à¤¾/à¤¸à¤•à¤¤à¥€ à¤¹à¥‚à¤‚?'
      },
      appInfo: {
        patterns: ['à¤¯à¤¹ à¤à¤ª à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ', 'à¤®à¥ˆà¤‚ à¤•à¥à¤¯à¤¾ à¤•à¤° à¤¸à¤•à¤¤à¤¾ à¤¹à¥‚à¤‚', 'à¤à¤ª à¤•à¥€ à¤µà¤¿à¤¶à¥‡à¤·à¤¤à¤¾à¤à¤‚', 'à¤¬à¥ˆà¤‚à¤• à¤•à¥€ à¤µà¤¿à¤¶à¥‡à¤·à¤¤à¤¾à¤à¤‚', 'à¤¬à¥ˆà¤‚à¤• à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ'],
        response: 'à¤¯à¤¹ à¤à¤• à¤†à¤§à¥à¤¨à¤¿à¤• à¤¬à¥ˆà¤‚à¤•à¤¿à¤‚à¤— à¤à¤ªà¥à¤²à¤¿à¤•à¥‡à¤¶à¤¨ à¤¹à¥ˆ à¤œà¥‹ à¤†à¤ªà¤•à¥‹ à¤–à¤¾à¤¤à¤¾ à¤–à¥‹à¤²à¤¨à¥‡, à¤¦à¤¸à¥à¤¤à¤¾à¤µà¥‡à¤œà¤¼ à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¿à¤¤ à¤•à¤°à¤¨à¥‡ à¤”à¤° à¤†à¤µà¥‡à¤¦à¤¨ à¤•à¥€ à¤¸à¥à¤¥à¤¿à¤¤à¤¿ à¤Ÿà¥à¤°à¥ˆà¤• à¤•à¤°à¤¨à¥‡ à¤•à¥€ à¤¸à¥à¤µà¤¿à¤§à¤¾ à¤¦à¥‡à¤¤à¤¾ à¤¹à¥ˆà¥¤ à¤†à¤ª à¤…à¤ªà¤¨à¥‡ à¤¡à¤¿à¤µà¤¾à¤‡à¤¸ à¤¸à¥‡ à¤¸à¥à¤°à¤•à¥à¤·à¤¿à¤¤ à¤°à¥‚à¤ª à¤¸à¥‡ à¤µà¤¿à¤­à¤¿à¤¨à¥à¤¨ à¤¬à¥ˆà¤‚à¤•à¤¿à¤‚à¤— à¤•à¤¾à¤°à¥à¤¯ à¤•à¤° à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤'
      },
      account: {
        patterns: ['à¤–à¤¾à¤¤à¤¾ à¤–à¥‹à¤²à¥‡à¤‚', 'à¤¨à¤¯à¤¾ à¤–à¤¾à¤¤à¤¾', 'à¤–à¤¾à¤¤à¤¾ à¤–à¥‹à¤²à¤¨à¤¾', 'à¤–à¤¾à¤¤à¤¾ à¤•à¥ˆà¤¸à¥‡ à¤–à¥‹à¤²à¥‡à¤‚'],
        response: 'à¤†à¤ª à¤‡à¤¸ à¤à¤ª à¤•à¥‡ à¤®à¤¾à¤§à¥à¤¯à¤® à¤¸à¥‡ à¤¸à¥€à¤§à¥‡ à¤–à¤¾à¤¤à¤¾ à¤–à¥‹à¤²à¤¨à¤¾ à¤¶à¥à¤°à¥‚ à¤•à¤° à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤ à¤¬à¤¸ "à¤–à¤¾à¤¤à¤¾ à¤–à¥‹à¤²à¥‡à¤‚" à¤…à¤¨à¥à¤­à¤¾à¤— à¤®à¥‡à¤‚ à¤¦à¤¿à¤ à¤—à¤ à¤šà¤°à¤£à¥‹à¤‚ à¤•à¤¾ à¤ªà¤¾à¤²à¤¨ à¤•à¤°à¥‡à¤‚à¥¤'
      },
      documents: {
        patterns: ['à¤†à¤µà¤¶à¥à¤¯à¤• à¤¦à¤¸à¥à¤¤à¤¾à¤µà¥‡à¤œ', 'à¤¦à¤¸à¥à¤¤à¤¾à¤µà¥‡à¤œ', 'à¤•à¥à¤¯à¤¾ à¤¦à¤¸à¥à¤¤à¤¾à¤µà¥‡à¤œ', 'à¤œà¤°à¥‚à¤°à¥€ à¤¦à¤¸à¥à¤¤à¤¾à¤µà¥‡à¤œ'],
        response: 'à¤¯à¤¹ à¤à¤ª à¤†à¤ªà¤•à¥‹ à¤†à¤§à¤¾à¤°, à¤ªà¥ˆà¤¨, à¤«à¥‹à¤Ÿà¥‹ à¤”à¤° à¤ªà¤¤à¤¾ à¤ªà¥à¤°à¤®à¤¾à¤£ à¤…à¤ªà¤²à¥‹à¤¡ à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤®à¤¾à¤°à¥à¤—à¤¦à¤°à¥à¤¶à¤¨ à¤•à¤°à¥‡à¤—à¤¾à¥¤'
      },
      status: {
        patterns: ['à¤†à¤µà¥‡à¤¦à¤¨ à¤•à¥€ à¤¸à¥à¤¥à¤¿à¤¤à¤¿', 'à¤¸à¥à¤¥à¤¿à¤¤à¤¿', 'à¤¸à¥à¤¥à¤¿à¤¤à¤¿ à¤œà¤¾à¤‚à¤šà¥‡à¤‚', 'à¤†à¤µà¥‡à¤¦à¤¨ à¤Ÿà¥à¤°à¥ˆà¤•'],
        response: 'à¤†à¤ª à¤‡à¤¸ à¤à¤ª à¤®à¥‡à¤‚ "à¤¸à¥à¤¥à¤¿à¤¤à¤¿ à¤Ÿà¥à¤°à¥ˆà¤• à¤•à¤°à¥‡à¤‚" à¤…à¤¨à¥à¤­à¤¾à¤— à¤®à¥‡à¤‚ à¤œà¤¾à¤•à¤° à¤•à¤­à¥€ à¤­à¥€ à¤…à¤ªà¤¨à¥‡ à¤†à¤µà¥‡à¤¦à¤¨ à¤•à¥€ à¤¸à¥à¤¥à¤¿à¤¤à¤¿ à¤¦à¥‡à¤– à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤'
      },
      updates: {
        patterns: ['à¤¦à¤¸à¥à¤¤à¤¾à¤µà¥‡à¤œ à¤…à¤ªà¤¡à¥‡à¤Ÿ', 'à¤¦à¤¸à¥à¤¤à¤¾à¤µà¥‡à¤œ à¤¬à¤¦à¤²à¥‡à¤‚', 'à¤¦à¤¸à¥à¤¤à¤¾à¤µà¥‡à¤œ à¤¸à¤‚à¤¶à¥‹à¤§à¤¿à¤¤ à¤•à¤°à¥‡à¤‚', 'à¤ªà¤¤à¤¾ à¤ªà¥à¤°à¤®à¤¾à¤£ à¤¬à¤¦à¤²à¥‡à¤‚'],
        response: 'à¤†à¤ª à¤à¤ª à¤•à¥‡ "à¤¦à¤¸à¥à¤¤à¤¾à¤µà¥‡à¤œà¤¼ à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚" à¤…à¤¨à¥à¤­à¤¾à¤— à¤¸à¥‡ à¤•à¤­à¥€ à¤­à¥€ à¤…à¤ªà¤¨à¥‡ à¤¦à¤¸à¥à¤¤à¤¾à¤µà¥‡à¤œà¤¼ à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤•à¤° à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤'
      },
      security: {
        patterns: ['à¤¸à¥à¤°à¤•à¥à¤·à¤¾ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€', 'à¤¸à¥à¤°à¤•à¥à¤·à¤¾', 'à¤¸à¥à¤°à¤•à¥à¤·à¤¿à¤¤', 'à¤–à¤¾à¤¤à¤¾ à¤¸à¥à¤°à¤•à¥à¤·à¤¾'],
        response: 'à¤¯à¤¹ à¤à¤ª à¤à¤¨à¥à¤•à¥à¤°à¤¿à¤ªà¥à¤Ÿà¥‡à¤¡ à¤šà¥ˆà¤¨à¤² à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¤¤à¤¾ à¤¹à¥ˆà¥¤ à¤†à¤ªà¤•à¤¾ à¤¡à¥‡à¤Ÿà¤¾ à¤¸à¥à¤°à¤•à¥à¤·à¤¿à¤¤ à¤¹à¥ˆà¥¤ à¤…à¤ªà¤¨à¥‡ à¤µà¤¿à¤µà¤°à¤£ à¤•à¤¿à¤¸à¥€ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤¸à¤¾à¤à¤¾ à¤¨ à¤•à¤°à¥‡à¤‚, à¤¯à¤¹à¤¾à¤‚ à¤¤à¤• à¤•à¤¿ à¤šà¥ˆà¤Ÿ à¤®à¥‡à¤‚ à¤­à¥€ à¤¨à¤¹à¥€à¤‚à¥¤'
      },
      support: {
        patterns: ['à¤¸à¤¹à¤¾à¤¯à¤¤à¤¾ à¤¯à¤¾ à¤¸à¤®à¤°à¥à¤¥à¤¨ à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤•à¤°à¤¨à¤¾', 'à¤¸à¤¹à¤¾à¤¯à¤¤à¤¾', 'à¤¸à¤®à¤°à¥à¤¥à¤¨', 'à¤—à¥à¤°à¤¾à¤¹à¤• à¤¸à¥‡à¤µà¤¾'],
        response: 'à¤†à¤ª à¤•à¤¿à¤¸à¥€ à¤­à¥€ à¤¸à¤®à¤¯ à¤‡à¤¸ à¤¸à¤¹à¤¾à¤¯à¤• à¤¸à¥‡ à¤šà¥ˆà¤Ÿ à¤•à¤° à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤ à¤¨à¥€à¤šà¥‡ à¤…à¤ªà¤¨à¤¾ à¤ªà¥à¤°à¤¶à¥à¤¨ à¤Ÿà¤¾à¤‡à¤ª à¤•à¤°à¥‡à¤‚, à¤®à¥ˆà¤‚ à¤¯à¤¹à¥€à¤‚ à¤†à¤ªà¤•à¥€ à¤®à¤¦à¤¦ à¤•à¤°à¥‚à¤‚à¤—à¤¾à¥¤'
      },
      branch: {
        patterns: ['à¤¶à¤¾à¤–à¤¾ à¤œà¤¾à¤¨à¤¾', 'à¤¶à¤¾à¤–à¤¾ à¤®à¥‡à¤‚ à¤œà¤¾à¤¨à¤¾', 'à¤¶à¤¾à¤–à¤¾ à¤œà¤¾à¤¨à¤¾ à¤ªà¤¡à¤¼à¥‡à¤—à¤¾', 'à¤¶à¤¾à¤–à¤¾ à¤­à¥à¤°à¤®à¤£', 'à¤«à¤¿à¤œà¤¿à¤•à¤² à¤¶à¤¾à¤–à¤¾'],
        response: 'à¤¨à¤¹à¥€à¤‚, à¤†à¤ªà¤•à¥‹ à¤¶à¤¾à¤–à¤¾ à¤œà¤¾à¤¨à¥‡ à¤•à¥€ à¤†à¤µà¤¶à¥à¤¯à¤•à¤¤à¤¾ à¤¨à¤¹à¥€à¤‚ à¤¹à¥ˆà¥¤ à¤‡à¤¸ à¤à¤ª à¤•à¥‡ à¤…à¤‚à¤¦à¤° à¤¸à¤­à¥€ à¤ªà¥à¤°à¤•à¥à¤°à¤¿à¤¯à¤¾à¤à¤‚ à¤ªà¥‚à¤°à¥€ à¤¤à¤°à¤¹ à¤‘à¤¨à¤²à¤¾à¤‡à¤¨ à¤¹à¥ˆà¤‚à¥¤'
      },
      default: "à¤®à¥à¤à¥‡ à¤–à¥‡à¤¦ à¤¹à¥ˆ, à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¥‡ à¤ªà¥à¤°à¤¶à¥à¤¨ à¤•à¥‹ à¤¸à¤®à¤ à¤¨à¤¹à¥€à¤‚ à¤ªà¤¾à¤¯à¤¾/à¤ªà¤¾à¤ˆà¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤‡à¤¸à¥‡ à¤¦à¥‹à¤¬à¤¾à¤°à¤¾ à¤²à¤¿à¤–à¥‡à¤‚ à¤¯à¤¾ à¤¹à¤®à¤¾à¤°à¥‡ à¤—à¥à¤°à¤¾à¤¹à¤• à¤¸à¤¹à¤¾à¤¯à¤¤à¤¾ à¤¸à¥‡ à¤¸à¤‚à¤ªà¤°à¥à¤• à¤•à¤°à¥‡à¤‚à¥¤"
    },
    kn: {
      greeting: {
        patterns: ['à²¨à²®à²¸à³à²•à²¾à²°', 'à²¹à²²à³‹', 'à²¹à²¾à²¯à³', 'à²¶à³à²­à³‹à²¦à²¯', 'à²¶à³à²­ à²®à²§à³à²¯à²¾à²¹à³à²¨', 'à²¶à³à²­ à²¸à²‚à²œà³†'],
        response: 'à²¨à²®à²¸à³à²•à²¾à²°! à²¨à²®à³à²® à²¬à³à²¯à²¾à²‚à²•à²¿à²‚à²—à³ à²…à²ªà³à²²à²¿à²•à³‡à²¶à²¨à³â€Œà²—à³† à²¸à³à²¸à³à²µà²¾à²—à²¤. à²¨à²¾à²¨à³ à²¨à²¿à²®à²—à³† à²¹à³‡à²—à³† à²¸à²¹à²¾à²¯ à²®à²¾à²¡à²¬à²¹à³à²¦à³?'
      },
      appInfo: {
        patterns: ['à²ˆ à²…à²ªà³à²²à²¿à²•à³‡à²¶à²¨à³ à²à²¨à³', 'à²¨à²¾à²¨à³ à²à²¨à³ à²®à²¾à²¡à²¬à²¹à³à²¦à³', 'à²…à²ªà³à²²à²¿à²•à³‡à²¶à²¨à³ à²µà³ˆà²¶à²¿à²·à³à²Ÿà³à²¯à²—à²³à³', 'à²¬à³à²¯à²¾à²‚à²•à³ à²µà³ˆà²¶à²¿à²·à³à²Ÿà³à²¯à²—à²³à³', 'à²¬à³à²¯à²¾à²‚à²•à³ à²à²¨à³'],
        response: 'à²‡à²¦à³ à²†à²§à³à²¨à²¿à²• à²¬à³à²¯à²¾à²‚à²•à²¿à²‚à²—à³ à²…à²ªà³à²²à²¿à²•à³‡à²¶à²¨à³ à²†à²—à²¿à²¦à³†. à²‡à²¦à³ à²–à²¾à²¤à³† à²¤à³†à²°à³†à²¯à³à²µà³à²¦à³, à²¦à²¾à²–à²²à³†à²—à²³à²¨à³à²¨à³ à²¨à²¿à²°à³à²µà²¹à²¿à²¸à³à²µà³à²¦à³ à²®à²¤à³à²¤à³ à²…à²°à³à²œà²¿à²¯ à²¸à³à²¥à²¿à²¤à²¿à²¯à²¨à³à²¨à³ à²Ÿà³à²°à³à²¯à²¾à²•à³ à²®à²¾à²¡à³à²µ à²¸à²¾à²®à²°à³à²¥à³à²¯à²µà²¨à³à²¨à³ à²¨à²¿à²®à²—à³† à²¨à³€à²¡à³à²¤à³à²¤à²¦à³†. à²¨à²¿à²®à³à²® à²¸à²¾à²§à²¨à²¦à²¿à²‚à²¦ à²¸à³à²°à²•à³à²·à²¿à²¤à²µà²¾à²—à²¿ à²µà²¿à²µà²¿à²§ à²¬à³à²¯à²¾à²‚à²•à²¿à²‚à²—à³ à²•à²¾à²°à³à²¯à²—à²³à²¨à³à²¨à³ à²¨à³€à²µà³ à²®à²¾à²¡à²¬à²¹à³à²¦à³.'
      },
      account: {
        patterns: ['à²–à²¾à²¤à³† à²¤à³†à²°à³†à²¯à²¿à²°à²¿', 'à²¹à³Šà²¸ à²–à²¾à²¤à³†', 'à²–à²¾à²¤à³† à²¤à³†à²°à³†à²¯à³à²µà³à²¦à³', 'à²–à²¾à²¤à³† à²¹à³‡à²—à³† à²¤à³†à²°à³†à²¯à³à²µà³à²¦à³'],
        response: 'à²¨à³€à²µà³ à²ˆ à²…à²ªà³à²²à²¿à²•à³‡à²¶à²¨à³â€Œà²¨à²²à³à²²à²¿à²¯à³‡ à²–à²¾à²¤à³† à²¤à³†à²°à³†à²¯à³à²µ à²ªà³à²°à²•à³à²°à²¿à²¯à³† à²ªà³à²°à²¾à²°à²‚à²­à²¿à²¸à²¬à²¹à³à²¦à³. "à²–à²¾à²¤à³† à²¤à³†à²°à³†à²¯à²¿à²°à²¿" à²µà²¿à²­à²¾à²—à²¦ à²¸à³‚à²šà²¨à³†à²—à²³à²¨à³à²¨à³ à²…à²¨à³à²¸à²°à²¿à²¸à²¿.'
      },
      documents: {
        patterns: ['à²…à²—à²¤à³à²¯à²µà²¿à²°à³à²µ à²¡à²¾à²•à³à²¯à³à²®à³†à²‚à²Ÿà³â€Œà²—à²³à³', 'à²¡à²¾à²•à³à²¯à³à²®à³†à²‚à²Ÿà³â€Œà²—à²³à³', 'à²¯à²¾à²µ à²¡à²¾à²•à³à²¯à³à²®à³†à²‚à²Ÿà³â€Œà²—à²³à³', 'à²¬à³‡à²•à²¾à²¦ à²¡à²¾à²•à³à²¯à³à²®à³†à²‚à²Ÿà³â€Œà²—à²³à³'],
        response: 'à²ˆ à²…à²ªà³à²²à²¿à²•à³‡à²¶à²¨à³ à²¨à²¿à²®à²—à³† à²†à²§à²¾à²°à³, à²ªà³à²¯à²¾à²¨à³, à²«à³‹à²Ÿà³‹ à²®à²¤à³à²¤à³ à²µà²¿à²³à²¾à²¸à²¦ à²ªà³à²°à³‚à²«à³ à²…à²ªà³â€Œà²²à³‹à²¡à³ à²®à²¾à²¡à³à²µ à²ªà³à²°à²•à³à²°à²¿à²¯à³†à²¯à²¨à³à²¨à³ à²¤à³‹à²°à²¿à²¸à³à²¤à³à²¤à²¦à³†.'
      },
      status: {
        patterns: ['à²…à²°à³à²œà²¿ à²¸à³à²¥à²¿à²¤à²¿', 'à²¸à³à²¥à²¿à²¤à²¿', 'à²¸à³à²¥à²¿à²¤à²¿ à²ªà²°à²¿à²¶à³€à²²à²¿à²¸à²¿', 'à²…à²°à³à²œà²¿ à²Ÿà³à²°à³à²¯à²¾à²•à³'],
        response: 'à²ˆ à²…à²ªà³à²²à²¿à²•à³‡à²¶à²¨à³â€Œà²¨ "à²¸à³à²¥à²¿à²¤à²¿ à²Ÿà³à²°à³à²¯à²¾à²•à³ à²®à²¾à²¡à²¿" à²µà²¿à²­à²¾à²—à²¦à²²à³à²²à²¿ à²¨à³€à²µà³ à²¯à²¾à²µà²¾à²— à²¬à³‡à²•à²¾à²¦à²°à³‚ à²¨à²¿à²®à³à²® à²…à²°à³à²œà²¿à²¯ à²¸à³à²¥à²¿à²¤à²¿à²¯à²¨à³à²¨à³ à²¨à³‹à²¡à²¬à²¹à³à²¦à³.'
      },
      updates: {
        patterns: ['à²¡à²¾à²•à³à²¯à³à²®à³†à²‚à²Ÿà³ à²…à²ªà³à²¡à³‡à²Ÿà³â€Œà²—à²³à³', 'à²¡à²¾à²•à³à²¯à³à²®à³†à²‚à²Ÿà³ à²¬à²¦à²²à²¾à²¯à²¿à²¸à²¿', 'à²¡à²¾à²•à³à²¯à³à²®à³†à²‚à²Ÿà³ à²®à²¾à²°à³à²ªà²¡à²¿à²¸à²¿', 'à²µà²¿à²³à²¾à²¸à²¦ à²ªà³à²°à³‚à²«à³ à²¬à²¦à²²à²¾à²¯à²¿à²¸à²¿'],
        response: 'à²¨à³€à²µà³ à²ˆ à²…à²ªà³à²²à²¿à²•à³‡à²¶à²¨à³â€Œà²¨ "à²¡à²¾à²•à³à²¯à³à²®à³†à²‚à²Ÿà³ à²…à²ªà³â€Œà²¡à³‡à²Ÿà³" à²µà²¿à²­à²¾à²—à²¦à²²à³à²²à²¿ à²¯à²¾à²µà²¾à²— à²¬à³‡à²•à²¾à²¦à²°à³‚ à²¡à²¾à²•à³à²¯à³à²®à³†à²‚à²Ÿà³â€Œà²—à²³à²¨à³à²¨à³ à²…à²ªà³â€Œà²¡à³‡à²Ÿà³ à²®à²¾à²¡à²¬à²¹à³à²¦à³.'
      },
      security: {
        patterns: ['à²­à²¦à³à²°à²¤à²¾ à²®à²¾à²¹à²¿à²¤à²¿', 'à²­à²¦à³à²°à²¤à³†', 'à²¸à³à²°à²•à³à²·à²¿à²¤', 'à²–à²¾à²¤à³† à²°à²•à³à²·à²£à³†'],
        response: 'à²ˆ à²…à²ªà³à²²à²¿à²•à³‡à²¶à²¨à³ à²Žà²¨à³â€Œà²•à³à²°à²¿à²ªà³à²Ÿà³†à²¡à³ à²šà²¾à²¨à³†à²²à³â€Œà²—à²³à²¨à³à²¨à³ à²¬à²³à²¸à³à²¤à³à²¤à²¦à³†. à²¨à²¿à²®à³à²® à²¡à³‡à²Ÿà²¾ à²¸à³à²°à²•à³à²·à²¿à²¤à²µà²¾à²—à²¿à²¦à³†. à²¨à²¿à²®à³à²® à²²à²¾à²—à²¿à²¨à³ à²µà²¿à²µà²°à²—à²³à²¨à³à²¨à³ à²¯à²¾à²°à³Šà²‚à²¦à²¿à²—à³‚ à²¹à²‚à²šà²¿à²•à³Šà²³à³à²³à²¬à³‡à²¡à²¿â€”even à²šà²¾à²Ÿà³â€Œà²¨à²²à³à²²à²¿à²¯à³‚ à²…à²²à³à²².'
      },
      support: {
        patterns: ['à²¸à²¹à²¾à²¯ à²…à²¥à²µà²¾ à²¬à³†à²‚à²¬à²² à²ªà²¡à³†à²¯à³à²µà³à²¦à³', 'à²¸à²¹à²¾à²¯', 'à²¬à³†à²‚à²¬à²²', 'à²—à³à²°à²¾à²¹à²• à²¸à³‡à²µà³†'],
        response: 'à²¨à³€à²µà³ à²¯à²¾à²µà²¾à²— à²¬à³‡à²•à²¾à²¦à²°à³‚ à²ˆ à²¸à²¹à²¾à²¯à²•à²¨à³Šà²‚à²¦à²¿à²—à³† à²šà²¾à²Ÿà³ à²®à²¾à²¡à²¬à²¹à³à²¦à³. à²•à³†à²³à²—à³† à²¨à²¿à²®à³à²® à²ªà³à²°à²¶à³à²¨à³†à²¯à²¨à³à²¨à³ à²Ÿà³ˆà²ªà³ à²®à²¾à²¡à²¿â€”à²¨à²¾à²¨à³ à²‡à²²à³à²²à²¿ à²¸à²¹à²¾à²¯ à²®à²¾à²¡à³à²¤à³à²¤à³‡à²¨à³†.'
      },
      branch: {
        patterns: ['à²¶à²¾à²–à³†à²—à³† à²¹à³‹à²—à²¬à³‡à²•à²¾', 'à²¶à²¾à²–à³†à²—à³† à²¹à³‹à²—à³à²µà³à²¦à³', 'à²¶à²¾à²–à³† à²­à³‡à²Ÿà²¿', 'à²«à²¿à²œà²¿à²•à²²à³ à²¶à²¾à²–à³†'],
        response: 'à²‡à²²à³à²², à²¨à³€à²µà³ à²¶à²¾à²–à³†à²—à³† à²¹à³‹à²—à²¬à³‡à²•à²¾à²—à²¿à²²à³à²². à²ˆ à²…à²ªà³à²²à²¿à²•à³‡à²¶à²¨à³â€Œà²¨à²²à³à²²à²¿à²¯à³‡ à²Žà²²à³à²² à²ªà³à²°à²•à³à²°à²¿à²¯à³†à²—à²³à³‚ à²†à²¨à³â€Œà²²à³ˆà²¨à³â€Œà²¨à²²à³à²²à²¿ à²‡à²°à³à²¤à³à²¤à²µà³†.'
      },
      default: "à²•à³à²·à²®à²¿à²¸à²¿, à²¨à²¾à²¨à³ à²¨à²¿à²®à³à²® à²ªà³à²°à²¶à³à²¨à³†à²¯à²¨à³à²¨à³ à²…à²°à³à²¥à²®à²¾à²¡à²¿à²•à³Šà²³à³à²³à²²à³ à²¸à²¾à²§à³à²¯à²µà²¾à²—à²²à²¿à²²à³à²². à²¦à²¯à²µà²¿à²Ÿà³à²Ÿà³ à²ªà³à²¨à²ƒ à²ªà³à²°à²¯à²¤à³à²¨à²¿à²¸à²¿ à²…à²¥à²µà²¾ à²¨à²®à³à²® à²—à³à²°à²¾à²¹à²• à²¬à³†à²‚à²¬à²²à²µà²¨à³à²¨à³ à²¸à²‚à²ªà²°à³à²•à²¿à²¸à²¿."
    }
  };

  useEffect(() => {
    // Add initial greeting when chat is opened
    if (isOpen && messages.length === 0) {
      const greeting = {
        text: currentLanguage === 'en' ? 
          'Hello! Welcome to our banking app. How can I assist you today?' :
          currentLanguage === 'hi' ?
          'à¤¨à¤®à¤¸à¥à¤¤à¥‡! à¤¹à¤®à¤¾à¤°à¥‡ à¤¬à¥ˆà¤‚à¤•à¤¿à¤‚à¤— à¤à¤ª à¤®à¥‡à¤‚ à¤†à¤ªà¤•à¤¾ à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆà¥¤ à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¥€ à¤•à¥ˆà¤¸à¥‡ à¤®à¤¦à¤¦ à¤•à¤° à¤¸à¤•à¤¤à¤¾/à¤¸à¤•à¤¤à¥€ à¤¹à¥‚à¤‚?' :
          'à²¨à²®à²¸à³à²•à²¾à²°! à²¨à²®à³à²® à²¬à³à²¯à²¾à²‚à²•à²¿à²‚à²—à³ à²…à²ªà³à²²à²¿à²•à³‡à²¶à²¨à³â€Œà²—à³† à²¸à³à²¸à³à²µà²¾à²—à²¤. à²¨à²¾à²¨à³ à²¨à²¿à²®à²—à³† à²¹à³‡à²—à³† à²¸à²¹à²¾à²¯ à²®à²¾à²¡à²¬à²¹à³à²¦à³?',
        sender: 'bot',
        timestamp: new Date().toLocaleTimeString()
      };
      setMessages([greeting]);
    }
  }, [isOpen, currentLanguage]);

  const getBotResponse = (message) => {
    const lowerMessage = message.toLowerCase();
    const currentQADB = qaDatabase[currentLanguage];

    for (const category in currentQADB) {
      if (category !== 'default' && currentQADB[category].patterns.some(pattern => 
        lowerMessage.includes(pattern.toLowerCase())
      )) {
        return currentQADB[category].response;
      }
    }
    return currentQADB.default;
  };

  const handleSendMessage = (e) => {
    e.preventDefault();
    if (!inputMessage.trim()) return;

    const newMessage = {
      text: inputMessage,
      sender: 'user',
      timestamp: new Date().toLocaleTimeString()
    };

    setMessages([...messages, newMessage]);
    setInputMessage('');

    // Get bot response
    setTimeout(() => {
      const botResponse = {
        text: getBotResponse(inputMessage),
        sender: 'bot',
        timestamp: new Date().toLocaleTimeString()
      };
      setMessages(prev => [...prev, botResponse]);
    }, 1000);
  };

  const handleLanguageChange = (lang) => {
    setCurrentLanguage(lang);
    const systemMessage = {
      text: lang === 'en' ? 
        'Language changed to English' : 
        lang === 'hi' ? 
        'à¤­à¤¾à¤·à¤¾ à¤¹à¤¿à¤‚à¤¦à¥€ à¤®à¥‡à¤‚ à¤¬à¤¦à¤²à¥€ à¤—à¤ˆ' : 
        'à²­à²¾à²·à³† à²•à²¨à³à²¨à²¡à²•à³à²•à³† à²¬à²¦à²²à²¾à²¯à²¿à²¸à²²à²¾à²—à²¿à²¦à³†',
      sender: 'system',
      timestamp: new Date().toLocaleTimeString()
    };
    setMessages(prev => [...prev, systemMessage]);
  };

  return (
    <div className={`chatbot-container ${isOpen ? 'open' : ''}`}>
      <button 
        className="chatbot-toggle fade-in"
        onClick={() => setIsOpen(!isOpen)}
      >
        {isOpen ? 'âœ•' : 'ðŸ’¬'}
      </button>

      {isOpen && (
        <div className="chatbot-window fade-in">
          <div className="chatbot-header">
            <h3>Bank Assist</h3>
            <div className="language-selector">
              <button 
                className={`lang-btn ${currentLanguage === 'en' ? 'active' : ''}`}
                onClick={() => handleLanguageChange('en')}
              >
                EN
              </button>
              <button 
                className={`lang-btn ${currentLanguage === 'hi' ? 'active' : ''}`}
                onClick={() => handleLanguageChange('hi')}
              >
                à¤¹à¤¿à¤‚
              </button>
              <button 
                className={`lang-btn ${currentLanguage === 'kn' ? 'active' : ''}`}
                onClick={() => handleLanguageChange('kn')}
              >
                à²•
              </button>
            </div>
          </div>

          <div className="chatbot-messages">
            {messages.map((message, index) => (
              <div 
                key={index} 
                className={`message ${message.sender} fade-in`}
              >
                <div className="message-content">
                  {message.text}
                </div>
                <div className="message-timestamp">
                  {message.timestamp}
                </div>
              </div>
            ))}
          </div>

          <form onSubmit={handleSendMessage} className="chatbot-input">
            <input
              type="text"
              value={inputMessage}
              onChange={(e) => setInputMessage(e.target.value)}
              placeholder={currentLanguage === 'en' ? 
                "Type your message..." : 
                currentLanguage === 'hi' ? 
                "à¤…à¤ªà¤¨à¤¾ à¤¸à¤‚à¤¦à¥‡à¤¶ à¤²à¤¿à¤–à¥‡à¤‚..." : 
                "à²¨à²¿à²®à³à²® à²¸à²‚à²¦à³‡à²¶à²µà²¨à³à²¨à³ à²Ÿà³ˆà²ªà³ à²®à²¾à²¡à²¿..."}
            />
            <button type="submit">Send</button>
          </form>
        </div>
      )}
    </div>
  );
};

export default ChatBot; 